<app-nav-menu></app-nav-menu>
<section class="application-details">
    <mat-card class="section-details">
        <mat-card-title class="section-details-title">Personal Information</mat-card-title>
        <form [formGroup]="applicationForm">
            <section class="section-details-body">
                <div class="input-wrap-row">
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input" required>
                            <mat-label>First Name</mat-label>
                            <input matInput formControlName="firstName" placeholder="First Name">
                            <mat-error *ngIf="applicationForm.get('firstName')!.touched && applicationForm.get('firstName')!.hasError('required')">
                                First Name is required
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input" required>
                            <mat-label>Last Name</mat-label>
                            <input matInput formControlName="lastName" placeholder="Last Name">
                            <mat-error *ngIf="applicationForm.get('lastName')!.touched && applicationForm.get('lastName')!.hasError('required')">
                                Last Name is required
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="input-wrap-row">
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input">
                            <mat-label>Phone Number</mat-label>
                            <input matInput formControlName="phoneNumber" placeholder="Phone Number">
                            <mat-error *ngIf="applicationForm.get('phoneNumber')!.touched && applicationForm.get('phoneNumber')!.hasError('required')">
                                Phone Number is required
                            </mat-error>
                            <mat-error *ngIf="applicationForm.get('phoneNumber')!.touched && applicationForm.get('phoneNumber')!.hasError('pattern')">
                                Phone Number must be 10 digits
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input">
                            <mat-label>Email</mat-label>
                            <input matInput formControlName="email" placeholder="Email">
                            <mat-error *ngIf="applicationForm.get('email')!.touched && applicationForm.get('email')!.hasError('required')">
                                Email is required
                            </mat-error>
                            <mat-error *ngIf="applicationForm.get('email')!.touched && applicationForm.get('email')!.hasError('email')">
                                Invalid email address
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </section>
            <hr />
            <mat-card-title class="section-details-title">Application Information</mat-card-title>
            <section class="section-details-body">
                <div class="input-wrap-row">
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input" required>
                            <mat-label>Application Number</mat-label>
                            <input matInput formControlName="applicationNumber" placeholder="Application Number" [readonly]="isUpdateMode" [ngClass]="{'readonly-field': isUpdateMode}">
                            <mat-error *ngIf="applicationForm.get('applicationNumber')!.touched && applicationForm.get('applicationNumber')!.hasError('required')">
                                Application Number is required
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input">
                            <mat-label>Status</mat-label>
                            <mat-select formControlName="status">
                                <mat-option *ngFor="let status of statuses" [value]="status">{{ status }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="input-wrap-row">
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input" required>
                            <mat-label>Amount</mat-label>
                            <input matInput formControlName="amount" placeholder="Amount">
                            <mat-error *ngIf="applicationForm.get('amount')!.touched && applicationForm.get('amount')!.hasError('required')">
                                Amount is required
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="input-wrap">
                        <mat-form-field appearance="outline" class="input-wrap__input">
                            <mat-label>Monthly Payment Amount</mat-label>
                            <input matInput formControlName="monthlyPayAmount" placeholder="Monthly Payment Amount" readonly class="readonly-field">
                        </mat-form-field>
                    </div>
                </div>
                <div class="input-wrap-row">
                    <div class="input-wrap" id="lastInput">
                        <mat-form-field appearance="outline" class="input-wrap__input" required>
                            <mat-label>Terms</mat-label>
                            <input matInput formControlName="terms" placeholder="Terms">
                            <mat-error *ngIf="applicationForm.get('terms')!.touched && applicationForm.get('terms')!.hasError('required')">
                                Terms are required
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </section>
            <hr />
        </form>
        <mat-card-actions class="details-buttons">
            <button mat-button color="primary" (click)="onSave()">{{ buttonText }}</button>
        </mat-card-actions>
    </mat-card>
</section>
